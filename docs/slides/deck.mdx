import { Appear, Head, Notes, Image } from 'mdx-deck';
import { syntaxHighlighter as SyntaxHighlighter } from 'mdx-deck/themes';
import { Layout } from './src';

<Head>
  <title>BDD workshop</title>
</Head>

export default Layout

# Multi-layer Outside-in BDD
## Behaviour Driven Design <br/>for modern Rails apps

---

## A note on these slides

1. simplified version of slides from actual workshop
1. use [MDX-deck](https://github.com/jxnblk/mdx-deck)
1. raw MDX deck can be viewed in git repo
    * [github docs/slides/deck.mdx](https://github.com/failure-driven/bdd-workshop-app/blob/master/docs/slides/deck.mdx)
1. to see speaker notes **OPTION-p** (`⌥ p`) on mac

<Notes>

* no notes on this slide

</Notes>

---

## Install - code

* git clone git@github.com/failure-driven/bdd-workshop-app.git
* Ruby 2.6.2, Node 10.15.3, PostgreSQL, Chrome
```sh
bundle install && yarn install
bin/rails db:create db:migrate
make
bin/rails server
```

<Notes>

* or look at the repo http://bit.ly/railsconf2019-bdd

</Notes>

---

## Install - Kahoot

* https://kahoot.com/mobile-app/
* Or directly https://kahoot.it/

<Notes>

* pre workshop kahoot
* https://create.kahoot.it/share/bdd-workshop-icebreaker/5aed0b32-91d3-4745-83f5-3cd0089b93cb

</Notes>

---

## Fresho

<Image
  style={{ width: '400px', height: '400px' }}
  src="images/fresho_logo_green.svg" />

<Notes>

* The way we work at Fresho
* 8 developers, full stack, full pipeline
    * No QA
    * No ops
* Devs do
    * Business analysis - 2am market visits
    * Solution design
    * Frontend, backend, infrastructure, test frameworks
* Pairing, trunk based development which is agile and iterative
* 100% test first
* Each piece of code is tested in 6 or 7 different ways before it’s written
* A well maintained automated test suite will ultimately save you time
* Manual tests DO NOT SCALE

</Notes>

---

# Test Driven Design

<Appear>

<div>

* Red, Green, Refactor

</div>
<div>

* Design a loosely-coupled solution

</div>
<div>

* Test code implementation of an isolated unit

</div>

</Appear>

<Notes>

* When people think of testing they often think of TDD
* Test Driven Development
* or (more correctly) Test Driven Design
* TDD often refers to test driving implementation of isolated units
    * Red Green Refactor
    * Write a test
    * See it fail
    * Write the simplest implementation to make the test pass
    * And iterate
* TDD is a great way to design simple, loosely coupled solutions at a detailed low level
* It’s all about the code implementation of single isolated units
* But the style of testing we’re primarily interested today in (you guessed it!) BDD - Behaviour Driven Design

</Notes>

---

# Behaviour Driven Design

<Appear>

<div>

* Enough is enough

</div>
<div>

* Deliver stakeholder value

</div>
<div>

* Test behaviour across many units

</div>

</Appear>

<Notes>

* In contrast, BDD is about testing behaviour, NOT implementation
* According to the RSpec book, there are 3 key principles of BDD
* Enough is enough
    * Working towards stakeholder expectations, we should avoid doing more than we need to
    * Build the minimum feature
    * Get feedback from users
    * Build according to their needs
* Deliver stakeholder value
    * There are multiple stakeholders - ie shareholders, product owner, also admins and users
    * Software should be about delivering demonstrable value to them.
* BDD is all about behavior across many units
    * The idea being that isolated units which are tested on their own you may have 100% code coverage
    * But if a number of those units are expected to work together, your isolated tests may not be enough.

Let’s take a look at a 100% unit tested, behavioural failure

</Notes>

---

<Image
  style={{ width: '40vw', height: '70vh' }}
  src="images/automated-door-no-integration.gif"/>

<Notes>

* Can you see what’s going on here?
* A gate with a sensor, which seems to work correctly
* And a door with a sensor, which also seems to work correctly
* But where’s the person walking through the doors?!
* The problem here is that the two of these together don’t behave the way you would expect them to!

</Notes>

---

# TODO complete notes

<https://github.com/failure-driven/bdd-workshop-app>

